(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{23:function(e,t,a){e.exports=a(45)},28:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(13),r=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(28);var l=a(1),o=a(2),i=a(3),m=Object(n.createContext)(),u=function(e,t){switch(t.type){case"POPULATE_USER":return t.user;case"REMOVE_USER":return localStorage.removeItem("askbook"),{};default:return e}},d=a(21),p=a.n(d),f=function(e){var t=e.onClick;return c.a.createElement("button",{className:"fbAuthButton",onClick:t},"Login with facebook")},h=function(){var e=Object(n.useContext)(m),t=(e.user,e.dispatch);return c.a.createElement("div",{className:"loginPage"},c.a.createElement("img",{src:"/logo/askbook.png",alt:"logo",height:"150px",width:"150px"}),c.a.createElement(p.a,{appId:"3315552048670569",scope:"email,public_profile,user_friends",callback:function(e){var a={fbId:e.id,name:e.name,email:e.email,avatar:e.picture.data.url,token:e.accessToken};fetch("/api/auth",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){t({type:"POPULATE_USER",user:e})}))},component:f}))},E=function(e){var t=e.data;return c.a.createElement(o.b,{className:"HomePostWrapper",to:"/question/"+t._id},c.a.createElement("div",{className:"HomePostProfileWrapper"},c.a.createElement("img",{className:"HomePostProPic",src:t.askedToAvatar}),c.a.createElement("img",{className:"HomePostProPic",src:t.askedByAvatar?t.askedByAvatar:"/icons/anonymous.png"})),c.a.createElement("div",{className:"HomePostContents"},c.a.createElement("div",{className:"homePostsQuestion"},c.a.createElement("p",{className:"HomePostsContentsHeader"},t.askedToName.split(" ")[0]," answered ",t.askedByName?t.askedByName.split(" ")[0]:"Anonymous"," \xa0",new Date(t.answeredAt).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})," \xa0",new Date(t.answeredAt).toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(/, /g,"-")),c.a.createElement("p",null,t.question)),c.a.createElement("div",{className:"HomePostLikeComment"},c.a.createElement("p",{className:"HomePoststat"},t.likes<2?t.likes+" like":t.likes+" likes"),c.a.createElement("p",{className:"HomePoststat"},t.comments<2?t.comments+" comment":t.comments+" comments"))))},b=function(e){var t=e.friend;return c.a.createElement(o.b,{className:"FbFriendsWrapper",to:"/user/"+t.fbId},c.a.createElement("img",{className:"fbFriendsProfile",src:t.avatar}),c.a.createElement("p",null,t.name.split(" ")[0]))},g=function(){var e=Object(n.useContext)(m).user,t=Object(n.useState)([]),a=Object(l.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(0),i=Object(l.a)(o,2),u=i[0],d=i[1],p=Object(n.useState)([]),f=Object(l.a)(p,2),h=f[0],g=f[1],v=Object(n.useState)(!1),N=Object(l.a)(v,2);N[0],N[1];return Object(n.useEffect)((function(){fetch("/api/fbfriends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e.token})}).then((function(e){return e.json()})).then((function(e){r(e)})).catch((function(e){}))}),[]),Object(n.useEffect)((function(){var t="/api/homeposts?skip=".concat(u);fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e.token})}).then((function(e){return e.json()})).then((function(e){g(e)})).catch((function(e){}))}),[u]),c.a.createElement("div",null,c.a.createElement("div",{className:"fbFriendText"},c.a.createElement("p",{className:"fbFriendInnerText"},"friends from facebook")),c.a.createElement("div",{className:"fbFriends"},s.length>0?s.map((function(e){return c.a.createElement(b,{key:e.fbId,friend:e})})):c.a.createElement("p",{className:"noFBFriends"},"Nothing to show")),c.a.createElement("div",{className:"HomePosts"},h.length>0?h.map((function(e){return c.a.createElement(E,{key:e._id,data:e})})):c.a.createElement("p",{className:"NoHomePostsText"},"Follow people to see their posts")),c.a.createElement("div",{className:"paginationWrapper"},u>0&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u-1)}},"previous"),null!==h&&10===h.length&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u+1)}},"Next")))},v=a(10),N=a.n(v),k=function(){var e=Object(n.useContext)(m),t=e.user,a=e.dispatch,s=Object(n.useState)(!1),r=Object(l.a)(s,2),i=r[0],u=r[1],d="/user/".concat(t.fbId);return c.a.createElement("div",{className:"HeaderProfile"},c.a.createElement("img",{onClick:function(){return u(!0)},className:"HeaderProfileImage",alt:"profile",src:t.avatar,height:"35px",width:"35px"}),c.a.createElement(N.a,{isOpen:i,className:"UserModal",overlayClassName:"UserModalOverlay",ariaHideApp:!1},c.a.createElement("div",{className:"ModalMenuWrapper"},c.a.createElement(o.b,{to:d,className:"ModalMenuOptions StyleLink",onClick:function(){return u(!1)}},c.a.createElement("div",{className:"ModalMenuIcon"},c.a.createElement("img",{alt:"profile",src:"/icons/profile.png",width:"20px",height:"20px"})),c.a.createElement("div",{className:"ModalMenuText"},c.a.createElement("p",null,"Profile"))),c.a.createElement(o.b,{to:"/requests",className:"ModalMenuOptions StyleLink",onClick:function(){return u(!1)}},c.a.createElement("div",{className:"ModalMenuIcon"},c.a.createElement("img",{alt:"requests",src:"/icons/requests.png",width:"20px",height:"20px"})),c.a.createElement("div",{className:"ModalMenuText"},c.a.createElement("p",null,"Requests"))),c.a.createElement(o.b,{to:"/queries",className:"ModalMenuOptions StyleLink",onClick:function(){return u(!1)}},c.a.createElement("div",{className:"ModalMenuIcon"},c.a.createElement("img",{alt:"queries",src:"/icons/queries.png",width:"20px",height:"20px"})),c.a.createElement("div",{className:"ModalMenuText"},c.a.createElement("p",null,"Queries"))),c.a.createElement(o.b,{to:"/private",className:"ModalMenuOptions StyleLink",onClick:function(){return u(!1)}},c.a.createElement("div",{className:"ModalMenuIcon"},c.a.createElement("img",{alt:"private",src:"/icons/private.png",width:"20px",height:"20px"})),c.a.createElement("div",{className:"ModalMenuText"},c.a.createElement("p",null,"Private"))),c.a.createElement(o.b,{className:"ModalMenuOptions StyleLink",onClick:function(){u(!1),a({type:"REMOVE_USER"})}},c.a.createElement("div",{className:"ModalMenuIcon"},c.a.createElement("img",{alt:"logout",src:"/icons/logout.png",height:"20px",width:"20px"})),c.a.createElement("div",{className:"ModalMenuText"},c.a.createElement("p",null,"Logout"))),c.a.createElement("div",{className:"ModalMenuOptions",onClick:function(){return u(!1)}},c.a.createElement("div",{className:"ModalMenuIcon"},c.a.createElement("img",{alt:"cancel",src:"/icons/cancel.png",height:"20px",width:"20px"})),c.a.createElement("div",{className:"ModalMenuText"},c.a.createElement("p",null,"Cancel"))))))},O=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),i=o[0],m=o[1],u=Object(n.useState)([]),d=Object(l.a)(u,2),p=d[0],f=d[1];Object(n.useEffect)((function(){if(i.length>1){fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:i})}).then((function(e){return e.json()})).then((function(e){f(e)})).catch((function(e){}))}else f([])}),[i]);var h=function(){s(!1),m("")};return c.a.createElement("div",{className:"HeaderSearch"},c.a.createElement(N.a,{isOpen:a,className:"searchModal",overlayClassName:"UserModalOverlay",ariaHideApp:!1},c.a.createElement("div",{className:"searchModalWrapper"},c.a.createElement("div",{className:"searchModalTool"},c.a.createElement("input",{onChange:function(e){return m(e.target.value)},value:i,className:"searchModalInput",placeholder:"start typing name"}),c.a.createElement("button",{className:"bigButton",onClick:function(){return s(!1)}},"close")),c.a.createElement("div",{className:"searchResultWrapper"},p.length>0&&p.map((function(e){return c.a.createElement(j,{handleClear:h,key:e,data:e})}))))),c.a.createElement("button",{onClick:function(){return s(!0)},className:"HeaderSearchButton"},c.a.createElement("img",{className:"searchButtonIcon",src:"/icons/search.png"})))},j=function(e){var t=e.data,a=e.handleClear;return c.a.createElement(o.b,{onClick:a,to:"/user/"+t.fbId,className:"searchedProfileWrapper"},c.a.createElement("div",{className:"searchImageContainer"},c.a.createElement("img",{className:"searchProfileImage",src:t.avatar})),c.a.createElement("div",{className:"searchProfileName"},c.a.createElement("p",null,t.name)))},y=function(){Object(n.useContext)(m).user;return c.a.createElement("div",{className:"Header"},c.a.createElement("div",{className:"HeaderBranding"},c.a.createElement(o.b,{to:"/",className:"StyleLink"},c.a.createElement("h2",{className:"HeaderBrandingText"},"jigao"))),c.a.createElement(O,null),c.a.createElement(k,null))},S=function(e){var t=e.data;console.log(t);var a="/question/"+t._id,n=t.question;n=t.question.length>50?t.question.substr(0,50)+"...":t.question;var s=new Date(t.createdAt),r=s.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).replace(/, /g,"-"),l=s.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return c.a.createElement(o.b,{className:"QLink",to:a},c.a.createElement("div",{className:"QWrapper"},c.a.createElement("div",{className:"QAvatar"},c.a.createElement("img",{className:"QImage",height:"40px",width:"40px",src:t.avatar?t.avatar:"/icons/anonymous.png",alt:"asker"})),c.a.createElement("div",{className:"QBody"},c.a.createElement("div",{className:"QQuestion"},c.a.createElement("p",null,n)),c.a.createElement("div",{className:"QDescription"},c.a.createElement("div",{className:"AskedBy"},c.a.createElement("p",null,t.name)),c.a.createElement("div",{className:"isPrivate"},t.isPrivate?c.a.createElement("p",null,"Private"):c.a.createElement("p",null,"Public")),c.a.createElement("div",{className:"dateTimeQ"},c.a.createElement("p",{className:"dateTime"},r),c.a.createElement("p",{className:"dateTime"},l))))))},P=function(){var e=Object(n.useContext)(m).user,t=Object(i.f)().id,a=Object(n.useState)({}),s=Object(l.a)(a,2),r=s[0],u=s[1],d=Object(n.useState)(null),p=Object(l.a)(d,2),f=p[0],h=p[1],E=Object(n.useState)(0),b=Object(l.a)(E,2),g=b[0],v=b[1],N=Object(n.useState)("loading..."),k=Object(l.a)(N,2),O=k[0],j=k[1],y=Object(n.useState)(0),P=Object(l.a)(y,2),C=P[0],I=P[1];Object(n.useEffect)((function(){fetch("/api/user/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e.token})}).then((function(e){return e.json()})).then((function(t){u(t),t.following.includes(e.fbId)?I(!0):I(!1)})).catch((function(e){return j("No user Found!")}))}),[t,C]),Object(n.useEffect)((function(){B()}),[r,g]);var B=function(){fetch("/api/questions/profile?skip="+g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fbId:r.fbId,token:e.token})}).then((function(e){return e.json()})).then((function(e){h(e),e.length>0?j(null):j("nothing to show!")})).catch((function(e){return j("Error loading data!")}))};return c.a.createElement("div",null,c.a.createElement("div",{className:"Profile-Desc"},c.a.createElement("div",{className:"ProfHolder"},c.a.createElement("img",{className:"Pro-Desc-Img",alt:"User-Image",src:r.avatar,height:"50px",width:"50px"}),c.a.createElement("p",null,r.name),r.fbId&&c.a.createElement("p",null,r.followedBy.length<2?r.followedBy.length+" follower":r.followedBy.length+" followers")),c.a.createElement("div",{className:"buttonHolder"},e.fbId!==t&&c.a.createElement(o.b,{to:"/ask/".concat(r.fbId),className:"ButtonImage"},c.a.createElement("img",{alt:"icon",className:"iconImageButton",src:"/icons/ask.png"})),e.fbId!==t&&c.a.createElement("button",{onClick:function(){fetch("/api/follow/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e.token})}).then((function(e){return e.json()})).then((function(e){I(C+1)})).catch((function(e){}))},className:r.fbId&&r.followedBy.includes(e.fbId)?"activeButtonImage":"ButtonImage"},c.a.createElement("img",{className:r.fbId&&r.followedBy.includes(e.fbId)?"iconImageButtonActive":"iconImageButton",src:"/icons/add.png"})),c.a.createElement(o.b,{to:"/ask/".concat(r.fbId),className:"ButtonImage"},c.a.createElement("img",{className:"iconImageButton",src:"/icons/share.png"})))),c.a.createElement("div",{className:"sectionTitle"},"Public questions"),!O&&c.a.createElement("div",null,null!==f&&f.map((function(e){return c.a.createElement(S,{key:e._id,data:e})}))),!O&&c.a.createElement("div",{className:"paginationWrapper"},g>0&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return v(g-1)}},"previous"),null!==f&&10===f.length&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return v(g+1)}},"Next")),O&&c.a.createElement("div",{className:"ProfileDenyMessage"},c.a.createElement("p",null,O)))},C=function(){var e=Object(n.useContext)(m),t=e.user,a=(e.dispatch,Object(i.f)().id),s=Object(n.useState)({}),r=Object(l.a)(s,2),o=r[0],u=r[1],d=Object(n.useState)(""),p=Object(l.a)(d,2),f=p[0],h=p[1],E=Object(n.useState)(""),b=Object(l.a)(E,2),g=b[0],v=b[1],N=Object(n.useState)(""),k=Object(l.a)(N,2),O=k[0],j=k[1],y=Object(n.useState)("loading..."),S=Object(l.a)(y,2),P=S[0],C=S[1];Object(n.useEffect)((function(){fetch("/api/user/"+a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t.token})}).then((function(e){return e.json()})).then((function(e){u(e),e.fbId===t.fbId?C("Can't ask yourself!"):e.fbId!==t.fbId&&C("")})).catch((function(e){C("user not found")}))}),[a]),Object(n.useEffect)((function(){setTimeout((function(){v(""),j("")}),2e3)}),[g,O]);return c.a.createElement("div",null,!P&&c.a.createElement("div",{className:"AskProfileBadge"},c.a.createElement("div",{className:"profileBadge"},c.a.createElement("img",{className:"AskPageImage",src:o.avatar,height:"65px",width:"65px",alt:o.name}),c.a.createElement("p",{className:"askProfileName"},"Ask ",o.name)),g&&c.a.createElement("div",{className:"successMessage"},g),O&&c.a.createElement("div",{className:"errorMessage"},O),c.a.createElement("div",{className:"AskBox"},c.a.createElement("div",{className:"chatCount"},c.a.createElement("p",{className:"TextCount"},f.length,"/160")),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target.elements.question.value.length<10)return v(""),j("at least 10 characters");var a={question:e.target.elements.question.value,askedBy:t.fbId,askedAs:e.target.elements.askedAs.checked,isPrivate:e.target.elements.isPrivate.checked,askedTo:o.fbId,token:t.token};fetch("/api/ask",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.Success?(v(e.Success),j("")):(v(""),j(e.Error))})).catch((function(e){v(""),j("unknown Error")})),h(""),e.target.elements.isPrivate.checked=!1,e.target.elements.askedAs.checked=!1}},c.a.createElement("textarea",{placeholder:"type your answer here...",name:"question",value:f,onChange:function(e){e.target.value.length<=160&&h(e.target.value)},className:"AskBoxInputText"}),c.a.createElement("div",{className:"AskSettingPannel"},c.a.createElement("div",{className:"askOptions"},c.a.createElement("div",null,c.a.createElement("input",{name:"askedAs",type:"checkbox",id:"askedAs"}),c.a.createElement("label",{htmlFor:"askedAs"}," Ask as Anonymous")),c.a.createElement("div",null,c.a.createElement("input",{name:"isPrivate",type:"checkbox",id:"isPrivate"}),c.a.createElement("label",{htmlFor:"isPrivate"}," Ask in private"))),c.a.createElement("button",{className:"bigButton"},"Ask ",o.name.split(" ")[0]))))),P&&c.a.createElement("div",{className:"ProfileDenyMessage"},c.a.createElement("p",null,P)))},I=function(){var e=Object(n.useContext)(m).user;return c.a.createElement("div",{className:"Profile-Desc"},c.a.createElement("div",{className:"ProfHolder"},c.a.createElement("img",{className:"Pro-Desc-Img",alt:"User-Image",src:e.avatar,height:"50px",width:"50px"}),c.a.createElement("p",null,e.name)),c.a.createElement("div",{className:"buttonHolder"},c.a.createElement(o.b,{to:"/ask/".concat(e.fbId),className:"ButtonImage"},c.a.createElement("img",{className:"iconImageButton",src:"/icons/share.png"}))))},B=function(){var e=Object(n.useContext)(m).user,t=Object(n.useState)(null),a=Object(l.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(0),i=Object(l.a)(o,2),u=i[0],d=i[1],p=Object(n.useState)("loading..."),f=Object(l.a)(p,2),h=f[0],E=f[1];return Object(n.useEffect)((function(){fetch("/api/questions/requests?skip="+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fbId:e.fbId,token:e.token})}).then((function(e){return e.json()})).then((function(e){r(e),0===e.length?E("Nothing to show!"):E(null)})).catch((function(e){return E("Error Loading data!")}))}),[u]),c.a.createElement("div",null,c.a.createElement(I,null),c.a.createElement("div",{className:"sectionTitle"},"Inbox"),!h&&c.a.createElement("div",null,null!==s&&s.map((function(e){return c.a.createElement(S,{key:e._id,data:e})}))),!h&&c.a.createElement("div",{className:"paginationWrapper"},u>0&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u-1)}},"previous"),null!==s&&10===s.length&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u+1)}},"Next")),h&&c.a.createElement("div",{className:"ProfileDenyMessage"},c.a.createElement("p",null,h)))},w=function(){var e=Object(n.useContext)(m).user,t=Object(n.useState)(null),a=Object(l.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(0),i=Object(l.a)(o,2),u=i[0],d=i[1],p=Object(n.useState)("loading..."),f=Object(l.a)(p,2),h=f[0],E=f[1];return Object(n.useEffect)((function(){fetch("/api/questions/queries?skip="+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fbId:e.fbId,token:e.token})}).then((function(e){return e.json()})).then((function(e){r(e),0===e.length?E("Nothing to show!"):E(null)})).catch((function(e){return E("Error loading data!")}))}),[u]),c.a.createElement("div",null,c.a.createElement(I,null),c.a.createElement("div",{className:"sectionTitle"},"Outbox"),!h&&c.a.createElement("div",null,null!==s&&s.map((function(e){return c.a.createElement(S,{key:e._id,data:e})}))),!h&&c.a.createElement("div",{className:"paginationWrapper"},u>0&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u-1)}},"previous"),null!==s&&10===s.length&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u+1)}},"Next")),h&&c.a.createElement("div",{className:"ProfileDenyMessage"},c.a.createElement("p",null,h)))},x=function(e){var t=e.comment;return c.a.createElement("div",{className:"commentShowWrapper"},c.a.createElement("div",{className:"commentProfileWrapper"},c.a.createElement(o.b,{to:"/user/"+t.fbId},c.a.createElement("img",{className:"commentProfilePic",src:t.avatar,height:"35px",width:"35px"}))),c.a.createElement("div",{className:"commentTextWrapper"},c.a.createElement("p",null,c.a.createElement("span",{className:"commentProfileName"},t.name)," ",c.a.createElement("span",{className:"commentCommentText"},t.comment)),c.a.createElement("p",{className:"commentDateTime"},new Date(t.time).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).replace(/, /g,"-")," \xa0",new Date(t.time).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}))))},T=function(){var e=Object(n.useContext)(m).user,t=Object(n.useState)(null),a=Object(l.a)(t,2),s=a[0],r=a[1],u=Object(i.f)().id,d=Object(n.useState)("loading..."),p=Object(l.a)(d,2),f=p[0],h=p[1],E=Object(n.useState)(!1),b=Object(l.a)(E,2),g=b[0],v=b[1],k=Object(n.useState)(""),O=Object(l.a)(k,2),j=O[0],y=O[1],S=Object(n.useState)(null),P=Object(l.a)(S,2),C=P[0],I=P[1],B=Object(n.useState)(!1),w=Object(l.a)(B,2),T=w[0],M=w[1],A=Object(n.useState)(null),q=Object(l.a)(A,2),D=q[0],H=q[1],L=Object(n.useState)(""),U=Object(l.a)(L,2),W=U[0],J=U[1],Q=Object(n.useState)(null),F=Object(l.a)(Q,2),_=F[0],R=F[1];Object(n.useEffect)((function(){J("");var t="/api/questions/one/"+u;console.log(t),fetch(t,{method:"GET",headers:{"Content-Type":"application/json",token:e.token}}).then((function(e){return e.json()})).then((function(e){r(e),console.log(e),e._id?h(null):h("Nothing found!")})).catch((function(e){return h("Data not Found!")}))}),[C,D,_]);var G=function(){M(!0)},V=function(){var t={token:e.token};fetch("/api/questions/likes/"+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"success"===e.Message&&H("success")})).catch((function(e){return H("cannot like")}))};return c.a.createElement("div",{className:"QMainWrapper"},c.a.createElement(N.a,{isOpen:T,className:"UserModal",overlayClassName:"UserModalOverlay",ariaHideApp:!1},c.a.createElement("div",null,c.a.createElement("p",{className:"deleteMessage"},"Delete this question from ",null!==s&&(s.askedByName?s.askedByName:"Anonymous"),"?"),c.a.createElement("div",{className:"deleteModalButtonWrapper"},c.a.createElement("button",{className:"deleteModalButton",onClick:function(){var t={isHidden:!0,token:e.token};fetch("/api/questions/one/delete/"+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"success"===e.Message&&I("Deleted!")})).catch((function(e){return I("Cannot delete!")})),M(!1)}},"Yes"),c.a.createElement("button",{className:"deleteModalButton",onClick:function(){return M(!1)}},"No")))),!f&&c.a.createElement("div",{className:"QuestionWrapper"},s.answered&&s.askedToId===e.fbId&&c.a.createElement("div",{className:"QuestionDeleteShare"},c.a.createElement("button",{onClick:G,className:"deleteModalButton"},"Delete")),c.a.createElement("div",{className:"AskerPanel"},c.a.createElement(o.b,{to:function(){return s.askedById?"/user/"+s.askedById:void 0}},c.a.createElement("img",{className:"profileBadgeImage",height:"50px",width:"50px",src:s.askedByAvatar?s.askedByAvatar:"/icons/anonymous.png"})),c.a.createElement("div",{className:"AskerPanelQuestionBox"},c.a.createElement("p",{className:"AskerPanelQuestion"},s.askedByName?c.a.createElement("span",{className:"nameColor"},s.askedByName):c.a.createElement("span",{className:"nameColor"},"Anonymous")," ",s.question),c.a.createElement("p",{className:"AskerPanelTime"},new Date(s.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).replace(/, /g,"-")," \xa0",new Date(s.createdAt).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})," \xa0",s.isPrivate?"Private":"Public"))),!s.answered&&s.askedToId===e.fbId&&!g&&c.a.createElement("div",{className:"UnAnsweredButtonGroup"},c.a.createElement("button",{onClick:function(){return v(!0)},className:"UnAnsweredGroupButton"},"Answer"),c.a.createElement("button",{onClick:G,className:"UnAnsweredGroupButton"},"Delete")),!s.answered&&s.askedToId===e.fbId&&g&&c.a.createElement("div",{className:"AnswerBoxWrapper"},C&&c.a.createElement("p",{className:"answerSubmitMessage"},C),c.a.createElement("p",{className:"answerCount"},j.length,"/160"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={answer:j,isPrivated:t.target.elements.isPrivated.checked,token:e.token};fetch("/api/questions/one/"+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){"success"===e.Message&&I("success")})).catch((function(e){return I("Cannot submit!")}))},className:"answerFormWrapper"},c.a.createElement("textarea",{value:j,onChange:function(e){e.target.value.length<161&&y(e.target.value)},placeholder:"type your question here...",name:"question",className:"answerBox"}),c.a.createElement("div",{className:"AnswerSubmitPanel"},c.a.createElement("div",null,c.a.createElement("input",{name:"isPrivated",type:"checkbox",id:"isPrivated"}),c.a.createElement("label",{htmlFor:"isPrivated"}," Private answer")),c.a.createElement("button",{className:"bigButton"},"Answer")))),s.answered&&c.a.createElement("div",null,c.a.createElement("div",{className:"AnswerPanel"},c.a.createElement("div",{className:"AnswerPanelQuestionBox"},c.a.createElement("p",{className:"AskerPanelQuestion"},c.a.createElement("span",{className:"nameColor"},s.askedToName)," ",s.answer),c.a.createElement("p",{className:"AskerPanelTime"},new Date(s.answeredAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).replace(/, /g,"-")," \xa0",new Date(s.answeredAt).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})," \xa0",s.isPrivate?"Private":"Public")),c.a.createElement(o.b,{to:function(){return"/user/"+s.askedToId}},c.a.createElement("img",{className:"profileBadgeImage",height:"50px",width:"50px",src:s.askedToAvatar})))),s.answered&&c.a.createElement("div",{className:"likeShareCommentSection"},c.a.createElement("div",{className:"likeShareSection"},s.likes.includes(e.fbId)?c.a.createElement("button",{onClick:V,className:"likeSharePanelButton"},"Liked (",s.likes.length,")"):c.a.createElement("button",{onClick:V,className:"likeButtonUncheck"},"Like (",s.likes.length,")"),c.a.createElement("button",{className:"likeSharePanelButton"},"Share")),c.a.createElement("div",{className:"commentSection"},c.a.createElement("div",{className:"CommentTitle"},"Comments (",s.comments.length,")"),c.a.createElement("div",{className:"commentHolder"},s.comments.map((function(e,t){return c.a.createElement(x,{key:t,comment:e})}))),c.a.createElement("div",{className:"commentInputSection"},c.a.createElement("form",{className:"commentForm",onSubmit:function(t){if(t.preventDefault(),W.length>4){var a={token:e.token,comment:W,name:e.name,avatar:e.avatar};fetch("/api/questions/comments/"+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.message&&R(e.message)})).catch((function(e){return R("cannot comment")}))}}},c.a.createElement("textarea",{placeholder:"write here...",value:W,onChange:function(e){return e.target.value.length<161&&J(e.target.value)},className:"commentInputBox"}),c.a.createElement("div",{className:"ButtonHolder"},c.a.createElement("div",{className:"commentCounterWrapper"},c.a.createElement("p",{className:"commentCounter"},W.length,"/160")),c.a.createElement("button",{disabled:!(W.length>4),className:W.length>4?"commentSubmitButton":"commentSubmitButtonDeactive"},"Comment"))))))),f&&c.a.createElement("div",{className:"ProfileDenyMessage"},c.a.createElement("p",null,f)))},M=function(){var e=Object(n.useContext)(m).user,t=Object(n.useState)(null),a=Object(l.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(0),i=Object(l.a)(o,2),u=i[0],d=i[1],p=Object(n.useState)("loading..."),f=Object(l.a)(p,2),h=f[0],E=f[1];return Object(n.useEffect)((function(){fetch("/api/questions/private?skip="+u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fbId:e.fbId,token:e.token})}).then((function(e){return e.json()})).then((function(e){r(e),0===e.length?E("Nothing to show!"):E(null)})).catch((function(e){return E("Error Loading data!")}))}),[u]),c.a.createElement("div",null,c.a.createElement(I,null),c.a.createElement("div",{className:"sectionTitle"},"Private"),!h&&c.a.createElement("div",null,null!==s&&s.map((function(e){return c.a.createElement(S,{key:e._id,data:e})}))),!h&&c.a.createElement("div",{className:"paginationWrapper"},u>0&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u-1)}},"previous"),null!==s&&10===s.length&&c.a.createElement("button",{className:"paginationButton",onClick:function(){return d(u+1)}},"Next")),h&&c.a.createElement("div",{className:"ProfileDenyMessage"},c.a.createElement("p",null,h)))},A=function(){var e=Object(n.useReducer)(u,{fbId:"",name:"",email:"",avatar:"",token:""}),t=Object(l.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){try{var e=JSON.parse(localStorage.getItem("askbook"));fetch("https://graph.facebook.com/v2.8/me?access_token=".concat(e.token)).then((function(e){return e.json()})).then((function(t){t.id===e.fbId&&s({type:"POPULATE_USER",user:e})}))}catch(t){}}),[]),a.token?(localStorage.setItem("askbook",JSON.stringify(a)),c.a.createElement(m.Provider,{value:{user:a,dispatch:s}},c.a.createElement(o.a,null,c.a.createElement(y,null),c.a.createElement("div",{className:"container"},c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/",component:g,exact:!0}),c.a.createElement(i.a,{path:"/user/:id",component:P}),c.a.createElement(i.a,{path:"/ask/:id",component:C}),c.a.createElement(i.a,{path:"/requests",component:B}),c.a.createElement(i.a,{path:"/queries",component:w}),c.a.createElement(i.a,{path:"/question/:id",component:T}),c.a.createElement(i.a,{path:"/private",component:M})))))):c.a.createElement(m.Provider,{value:{user:a,dispatch:s}},c.a.createElement(h,null))};r.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.d3dd25f0.chunk.js.map